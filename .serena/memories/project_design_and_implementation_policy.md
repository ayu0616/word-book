**プロジェクトの設計と実装方針**

**1. プロジェクトの目的:**
*   単語帳アプリケーション「word-book」：語彙管理と学習機能を提供。

**2. 主要技術スタック:**
*   **フロントエンド:** Next.js, React, Tailwind CSS, Radix UI (shadcn/ui), react-hook-form, Zod
*   **バックエンド/API:** Hono, Drizzle ORM, PostgreSQL, Zod (バリデーション), bcryptjs (パスワードハッシュ化)
*   **ツール:** Biome (リンティング/フォーマット), Vitest (テスト), TypeScript, Husky (Gitフック), Drizzle Kit (DBマイグレーション), bun (パッケージマネージャー)

**3. アーキテクチャ:**
*   **レイヤードアーキテクチャ:** `domain`, `application`, `infrastructure`, `app` の各層で責務を分離。
    *   `domain`: コアビジネスロジック、エンティティ、値オブジェクト。
    *   `application`: アプリケーションサービス、ポート。
    *   `infrastructure`: リポジトリの実装、外部サービス（Drizzle ORM, bcryptなど）。
    *   `app`: Next.js固有のコード（ページ、APIルート）。
*   **Next.jsのページ設計:**
    *   `page.tsx`: サーバーコンポーネントとしてデータ取得とページ全体のレイアウトを担当。
    *   `***Content.tsx`: クライアントコンポーネントとしてユーザーインタラクションを含むコンテンツ部分を担当。
*   **API:** Honoフレームワークを使用し、`src/app/api/[[...route]]/` 以下にAPIルートを配置。
*   **データベース:** PostgreSQLとDrizzle ORMを使用。スキーマ定義は`src/db/schema.ts`、マイグレーションは`drizzle/`。

**4. 実装方針/特徴:**
*   **ユーザー認証:** サインアップ、ログイン、ログアウト機能。shadcn/ui、react-hook-form、Zodを用いたリファクタリング済み。
*   **アクセス制御:** 未ログインユーザー向けのページ（Next.jsミドルウェア）およびAPI（Honoミドルウェア）へのアクセス制限。
*   **単語帳機能:** 作成、登録、一覧表示、削除機能。
*   **単語学習機能:**
    *   学習対象: 学習記録がない、または前回の学習から一定期間が経過した単語。
    *   学習間隔: 正解するごとに2倍に延長、不正解で1日にリセット。
    *   学習回数: 5回連続正解で学習対象から除外。不正解で0にリセット。
*   **開発プラクティス:** リンティング、フォーマット、テスト、型チェック、Gitフックなど、コード品質と開発効率を重視。
